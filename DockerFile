# Use exact Java version from your pom.xml
FROM eclipse-temurin:21-jdk-jammy

WORKDIR /app

# Copy build files first (better caching)
COPY mvnw pom.xml ./
COPY .mvn/ .mvn/

# Build the app (matches your pom.xml)
RUN ./mvnw clean package

# Copy only the built JAR
COPY target/mansi-*.jar app.jar

# Run with production profile
CMD ["java", "-jar", "app.jar", "--spring.profiles.active=production"]